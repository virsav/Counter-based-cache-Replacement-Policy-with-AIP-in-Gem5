Name: Viraj Savaliya
ASU Id: 1217678787

1. How it was done:
The counter based AIP replecemnt policy (RefCount) is implemented and tested for the given benchmarks. refcount_rp.cc and refcount_rp.hh files were created to implement the RefCount replacement policy.
Also, changes were made to SConscript and ReplacementPolicies.py to make the policy available for use.

A patch file was generated by using the command "diff -x *.pyc -Naur ./gem5_old/src ./gem5/src > VS_RefCount.patch".
This command was applied from the directory in which both the gem5 and gem5_old is present.

All the benchmarks were kept inside direcory "benchmarks" which was in the gem5 root directory.
To run all the benchmarks "runall.sh" file was used by command: "bash runall.sh" from the gem5 root folder. (runall.sh file was kept in the gem5 root directory)

Individual directories were created from the command line itself for each run. Have a look at the "runall.sh" file.



2. How you can use:
To add the RefCount replacement policy to Gem5 do patching from outside the Gem5 folder.(From the directory inside which Gem5 is there)
TO patch use the command : "patch -p0 -i VS_RefCount.patch"

After it is successfully patched you will be able to use the RefCount replacement policy implemented.
Also, you will need to build the gem5 again after patching by using the command: "scons -j4 build/X86/gem5.opt" (use this command while inisde the gem5 root folder)

Before running the benchmarks keep the "benchmarks" directory containing both benhcmarks in the Gem5 root folder.

To run both the benchmarks for LRU as well as RefCount and for L2 cache size 1MB as well as 4MB. There is a runall.sh file created.
From the command terminal while inside Gem5 root folder use the command: "bash runall.sh"
All the required runs for the benchmarks with the required configurations will be done and the results will be stored in their respective directories created for each run.
To individually run have a look at the runall.sh and accordingly select one of the command lines present in it for configurations.

The L2 missrate can be checked for a particular run in the stats.txt file generated for that configuration.
For e.g. you are running bodytrack with 1MB L2 cache size and RefCount replacement policy for L2 cache then check the L2 cache missrate in bodytrack_RefCount_1MB > stats.txt 

The sample results or all runs are given in the report in the form of table as well as graph. 